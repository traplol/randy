
extern puts;
extern fprintf file, fmt, ...;

asm argc do
"
    movq (__argc__), %rax
    ret
"
end

asm argv do
"
    movq (__argv__), %rax
    ret
"
end

proc main argc, argv do
    var i = 0;
    while i < argc do
        fprintf(u64@(stderr), "arg%d = %s\n", i, u64@(argv + i*8));
        i = i + 1;
    done
    return 0;
end
